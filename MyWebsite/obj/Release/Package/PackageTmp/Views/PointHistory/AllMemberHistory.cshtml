@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutUser.cshtml";
}
<style>
</style>
<div class="padding">
    <div class="m-b primary">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/Account/Home">Trang chủ</a></li>
            <li class="breadcrumb-item active">lịch sử tính điểm</li>
        </ol>
    </div>

    <div style="top:6px">
        <button class="btn btn primary col-md-2 offset-md-10" id="CalPoint">Tính điểm</button>
    </div>
    <br />
    <div class="box ">

        <div class="box-body">
            <div class="table-responsive">
                <table ui-jp="dataTable" id="datatable" class="table table-striped b-t b-b ">
                    <thead>
                        <tr>
                            <th style="text-align:center">STT</th>
                            <th style="text-align:center">Tài khoản</th>
                            <th style="text-align:center">Ngày tính điểm</th>
                            <th style="text-align:center">Tên truyện</th>
                            <th style="text-align:center">Quản lý truyện</th>
                            <th style="text-align:center">Dịch truyện</th>
                            <th style="text-align:center">Upload</th>
                            <th style="text-align:center">Quản lý bản dịch</th>
                            <th style="text-align:center">Tổng điểm</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

</div>
@section Scripts
{
    <script>
        $(document).ready(function () {
            loadEmpGroup();
        });
        function loadEmpGroup() {

            $.ajax({
                type: 'POST',
                url: '/PointHistory/GetAllHistory',

                success: function (result) {
                    initTimeFrameDatatable(result);
                }
            });
        }
        $("#CalPoint").on("click", function () {
            $.ajax({
                type: 'POST',
                url: '/PointHistory/CalPoint',
                success: function (result) {
                    if (result.rs)
                        loadEmpGroup();
                    else
                        alert(result.mess);
                }
            });
        })
        function initTimeFrameDatatable(data) {
            $("#datatable").dataTable().fnDestroy();
            $("#datatable").dataTable({
                stateSave: true,
                "bFilter": true,
                "bSort": false,
                "data": data,
                "bRetrieve": true,
                "bScrollCollapse": true,
                "bProcessing": true,
                "oLanguage": {
                    "sSearch": "Tìm kiếm:",
                    "sSearchPlaceholder": "...",
                    "sZeroRecords": "Không có dữ liệu phù hợp",
                    "sInfo": "Hiển thị từ _START_ đến _END_ trên tổng số _TOTAL_ dòng",
                    "sEmptyTable": "Không có dữ liệu",
                    "sInfoFiltered": " - lọc ra từ _MAX_ dòng",
                    "sLengthMenu": "Hiển thị _MENU_ dòng",
                    "sProcessing": "Đang xử lý...",
                    "oPaginate": {
                        "sNext": "<i class='fa fa-chevron-right'></i>",
                        "sPrevious": "<i class='fa fa-chevron-left'></i>"
                    }
                },
                "aoColumnDefs": [
                    {
                        "aTargets": [0, 1, 2, 3, 4, 5, 6, 7, 8],
                        "sClass": "text-center",
                        "bSortable": false
                    }
                ],
                "bAutoWidth": false,
            });

        }
    </script>
}

