@using MyWebsite.Models
@*@model IEnumerable<Testing.ViewModels.LastUpdatedManga>*@
@using PagedList;
@using PagedList.Mvc;
@model PagedList.PagedList<MyWebsite.ViewModels.Home.Index.LastUpdatedManga>

@{
    ViewBag.Title = "Home Page";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="leftCol">

    <h1 style="display: none;">Read manga online for free in high quality and most full</h1>
    <div class="daily-update">
        <h2 class="title update-title" title="Latest Manga Releases">CHƯƠNG MỚI NHẤT</h2>
    </div>
    <div id="contentstory">
        <div class="doreamon">
            @foreach (var truyen in Model)
            {
                <div class="itemupdate first">
                    <a class="cover" href="/manga/@truyen.Alias-@truyen.MangaId">
                        <img src="~/Cover/@truyen.CoverLink" onError="this.onerror=null;this.src='/RootPicture/error-404.jpg';" width="60" height="85">
                    </a>
                    <ul>
                        <li>
                            <h3><a href="/manga/@truyen.Alias-@truyen.MangaId">@truyen.FullName</a></h3>
                            @*<a class="hot textdecoration"></a>*@
                            <a class="non"></a>
                        </li>
                        @foreach (var chuongtruyen in truyen.Last3Chapter)
                        {
                            <li>
                                <span><a class="sts sts_1" href="/read/@chuongtruyen.Alias/@truyen.MangaId-@chuongtruyen.ChapterId/@chuongtruyen.LanguageName" title="@chuongtruyen.FullName">(@chuongtruyen.LanguageName)@chuongtruyen.FullName</a></span>
                                <i>@chuongtruyen.UpdateAt</i>
                            </li>
                        }
                    </ul>
                </div>
            }
        </div>
    </div>

    <div id="loadpage">
        <div class="xem-them">
            <!-- Pagination -->
            <ul class="pagination">
                @Html.PagedListPager(Model, page => Url.Action("Index", new { page = page }), new PagedListRenderOptions { DisplayEllipsesWhenNotShowingAllPageNumbers = false })
            </ul>
            @*@if (ViewBag.TotalPage > 1)
                {
                    var pageDisplay = ViewBag.MaxPage;
                    int totalPage = (int)ViewBag.TotalPage;
                    int currentPage = ((int)ViewBag.Page);

                    var startPageIndex = Math.Max(1, currentPage - pageDisplay / 2);
                    var endPageIndex = Math.Min(totalPage, currentPage + pageDisplay / 2);

                    var link = "/Home/Index";

                  <ul class="pagination">
                     @if (currentPage > ViewBag.First)
                     {
                        <li class="first"><a href="@link?page=@ViewBag.First" title="Trang đầu" ><i class="fa fa-angle-double-left" aria-hidden="true"></i></a></li>
                        <li class="prev"><a href="@link?page=@ViewBag.Prev" title="Trang trước" ><i class="fa fa-angle-left" aria-hidden="true"></i></a></li>
                     }
                     @for (int i = startPageIndex; i <= endPageIndex; i++)
                     {
                         if (currentPage == i)
                         {
                             <li class="active"><a title="Trang @i">@i</a></li>
                         }
                         else
                         {
                            <li><a href="@link?page=@i" title="Trang @i">@i</a></li>
                         }
                     }
                     @if (currentPage < totalPage)
                     {
                        <li class="next"><a href="@link?page=@ViewBag.Next" title="Trang sau" ><i class="fa fa-angle-right" aria-hidden="true"></i></a></li>
                        <li class="last"><a href="@link?page=@ViewBag.Last" title="Trang cuối" ><i class="fa fa-angle-double-right" aria-hidden="true"></i></a></li>
                     }
                 </ul>
                }
                else
                {
                    <h2>Nothing</h2>
                }*@
        </div>
    </div>
    <div id="mystickytooltip" class="stickytooltip"></div>
</div>

